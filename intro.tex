\begin{abstract}
Many approaches have been proposed to build a unified IoT platform where physical and digital objects are accessible by applications crossing different organization and domains, and are based on IP-overlay architecture.
%To build a unified IoT platform in which physical and digital objects can be accessible by application across different organization and domain, many state of art approaches are based on IP-overlay architecture.
These solutions inherit the constraints of the current internet, especially in terms of naming, heterogeneity, mobility and security.
In this paper, we propose a new Information-Centric Network (ICN) based IoT middleware to address these challenges by leveraging various promising features of ICN, such as naming. We elaborate the functions of ICN-based IoT middleware by integrating with the two future internet architectures, namely Named-Data Networking and MobilityFirst. Moreover, we evaluate the efficiency of service discovery (one of the functions in the proposed ICN-based IoT middleware) and demonstrate the feasibility of the proposed ICN-based IoT middleware .
%Thus, we propose a new Information-Centric Network (ICN) based IoT middleware to address these challenges. In this paper, we introduce detailed protocol design for the functions in the middlewareï¼Œ and evaluate the efficiency of service discovery.
\end{abstract}

\section{Introduction}
Many standalone Internet of Things (IoT) platforms have been developed and deployed in different domains in the past. The recent trend, however, is to evolve towards a globally unified IoT platform, in which billions of objects can connect to the Internet, interact with each other and inter-operate with many different applications  across the boundaries of organization and domains.

%in which billions of objects connect to the Internet, available for interactions among themselves, as well as interactions with many different applications across boundaries of administration and domains.

Building a unified IoT platform, however, poses a set of unique challenges and requirements on the underlying network and systems.
%\begin{itemize}
\noindent{\bf Identity}:
To realize a unified IoT platform, 
%the capability
it needs to assign names (or IDs) that are unique and unified within the scope and lifetime of each device, data items generated by these devices, or a group of devices towards a common objective. Currently, IoT systems have multiple vertical stacks with their own identity mechanisms that do not inter-operate with one another.

\noindent{\bf Heterogeneity}:
IoT devices will have heterogeneous means of connecting to its application environment, and often have resource constraints, e.g., constrained resources in power, computing, storage and bandwidth.

\noindent{\bf Mobility}:
In some scenarios, the data producer is mobile and unable to provide reliable connection with data consumers. Thus, in presence of mobility, a unified IoT platform requires the system to deliver IoT data within delays that are acceptable to applications.

\noindent{\bf Security}:
The heterogeneity and openness of the IoT environment imposes great attack surface towards IoT devices and services. Without carefully considering security concerns such as identity authentication, data integrity and privacy, any IoT platform is hard to be adopted by either end-users or enterprises.
%\end{itemize}

%Firstly, it needs to support a large number of networked objects - Cisco predicts there will be around 50 Billion IoT devices (sensors, RFID tags, actuators, etc) on the Internet by 2020 ~\cite{ciscovisual}and many of these objects are mobile, for smoothly with respect to metrics like response time, throughput, resolution and routing scalability. Secondly, IoT devices will have heterogeneous means of connecting to the Internet, and often have severe resource constraints, e.g., constrained resources in power, computing, storage, bandwidth. Thirdly, interactions between the applications and objects are often private, contextual, real-time and dynamic, requiring strong security and privacy  protections.
\subsection{ICN-IoT Middleware}
Current approaches towards a unified IoT platform are mostly based upon Internet overlays, whose inherent inefficiencies hinder the platform from satisfying the challenges outlined earlier. In recent years, in order to address  the inefficiencies of today's Internet, Information-Centric Network (ICN) has been proposed. ICN identifies a network object (including a mobile device, content, or service) by an application-centric name instead of its IP address, and adopts the name-based routing
%, lending itself to supporting the unified IoT platform.
In this paper, we propose a unified IoT middleware, referred to as \emph{ICN-IoT} middleware, which can support several specific ICN architectures. As shown in Figure~\ref{fig:mid_arch}, the ICN-IoT middleware mainly consists of the following modules: publish/subscribe management, device/service discovery, context processing, and naming service. Among these modules, the publish/subscribe management is a centralized service while others are implemented in a distributed manner (discussed in Section~\ref{sec:physical}). Finally, the security component is implemented across all services.

It is worth noting that functions in the proposed middleware are required to comply with the IoT deployment requirements and protocol agnostic, and therefore the instantiation of the ICN-IoT middleware may differ depending on the underlying ICN protocol. Therefore, this paper discusses the IoT functions with respect to the Named-Data Networking and  MobilityFirst.
\vspace{-1mm}
\begin{figure}
\centering
\includegraphics[width=\columnwidth]{figure/middleware_architecture.png}
\caption{\label{fig:mid_arch} ICN-IoT middleware functionality break down.}
\end{figure}
\subsection{Name Data Networking (NDN)}
NDN~\cite{zhang2014named} provides a receiver-driven architecture by transmitting two types of packets : Interest and Data. Consumer issues Interest of the hierarchical content name and forwards it to Data Producer. When the Interest arrives at some node (either intermediate router or Data producer) that owns the requested content, the node will reply the requested content along the reverse path to the Data Consumer.
NDN forwarding is supported by three data structures:
%NDN provides three types of key components to support such functionality.
Forwarding Information Base (FIB) maintains the forwarding information at each NDN node. The content prefix and out-face mapping is recorded in the FIB. Once a certain face receives Data packet for a pending Interest,  it could be added into the FIB to indicate a healthy data retrieving path. Pending Interest Table (PIT) is a data structure that maintains the set of pending Interest routed by the node expecting Data packet in return. PIT entry is created by receiving Interest,
%and filters the redundant Interest that carried the same content name.
Due to the limit size of PIT, every PIT entry is associated with a timeout which is defined or estimated by the consumer based on the round trip time. Once a matching Data packet is received, the NDN node forwards it through the face recorded in the PIT before this entry being removed. Content Store(CS) is a data cache for storing Data packet for matching Interest along the reverse path. In addition, due to the limit size of local CS, Data producer can define the freshness of the Data packet in order to timeout it in the CS. With such mechanism,
NDN decouples the content from its original location without location binding.

%NDN eliminates the notion of source and destination as it is in IP network, and handle routing only for Interest Packet.

\subsection{MobilityFirst (MF)}\label{sec:intro_mf}
MF~\cite{raychaudhuri2012mobilityfirst} utilizes GUID to name every network object, while separating this GUID from its actual network address. The separation of identifier and its locator allows MF to support dynamic address binding, multiple addressing binding and late binding. As shown as Figure ~\ref{fig:mf_arch}, MF core network architecture includes the following network components.

\noindent{\bf Global Name Resolution Service(GNRS)}: GNRS is a centralized service that maintains mappings between GUID and network address. MF routers create the entries by performing an $Insert$ for the GUIDs of attached network devices and the associated network address, and query GNRS for a translation from GUID to the latest binding network address. Recent work shows that this translation performance is much better (50-100 ms delay) than DNS resolution~\cite{vu2012dmap}.

\noindent{\bf Hybrid GUID/NA address routing}: Each MF router can make routing decision based on NA or GUID in the header of data packet, since routing decision are made by a hop-by-hop manner~\cite{nelson2011gstar}.

\noindent{\bf Delay-Tolerant Network(DTN)}: Each MF router is able to cache data packets in its storage.As such,  data can be stored or forwarded depending on different routing policies, such as quality of the link which is  useful over wireless interface.

\begin{figure}
\centering
\includegraphics[width=\columnwidth]{figure/mf_arch.eps}
\caption{\label{fig:mf_arch}Mobilityfirst architecture.}
\vspace{-1mm}
\end{figure}

%\subsection{MF Multicast}\label{sec:multi}

\vspace{1mm}\noindent{\bf MF multicast}: MF multicast is based on the idea of group GUID that gathers multiple network objects into one entity. Group GUID  to object GUID mapping is a one-to-many mapping that being maintained at GNRS server. Network object can claim to join the multicast group, and either edge router or a centralized management service will perform insertion of the object GUID to group GUID mapping to into GNRS server. When the first router queries GNRS server for a group GUID mapping, GNRS server returns a list of member GUIDs. The router assembles these GUIDs into the header and performs "Longest Common Path(LCP)" algorithm to determine the next hop address.Shown as Figure~\ref{fig:multicast}, routers look up the routing table for these GUIDs, and check if there are multiple next hops. When the number of the results is more than one, the router reassembles the header and forwards the copied packet to corresponding interfaces. If the number of multicast group members becomes significant, another approach can be adopted to resolve this issue--instead of assembling all GUIDs into the header after one query, each router on the path queries GNRS server for the group members and performs LCP to decide next hop.
\vspace{-1mm}
\begin{figure}
\centering
\includegraphics[width=\columnwidth]{figure/multicast.png}
\caption{\label{fig:multicast}MF multicast example: A client sends a message to Group 12345}
\end{figure}
